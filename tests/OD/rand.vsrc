import rand
import common
import dbg

Event InputL, OutputL, Write {
  addr : UInt64,
  x    : Int32
}

let U = rand.uniform(0, 1);  -- we could use also rand.coin()

foreach i in common.range(0, $1 as Int32) {
    let t = new [InputL, OutputL, Write];

    foreach n in common.range(0, $2 as Int32) {

      let x = rand.uni(0, 100);
      if x in common.range(0, 9) {
        -- yield Input(pick from U) to t;
        yield InputL(0, U.get()) to t;
        continue;
      }

      if x in common.range(10, 19) {
        -- yield Output(pick from U) to t;
        yield OutputL(0, U.get()) to t;
        continue;
      }

      yield Write(0, 0) to t;
    }
}

